<!-- Get Description, cost, location, hours -->
<!-- Discount days? -->

<!DOCTYPE html>
<html>
<head>
  <title>Place Searches</title>
  <meta name="viewport" content="initial-scale=1.0, user-scalable=no">
  <meta charset="utf-8">
  <style>
    /* Always set the map height explicitly to define the size of the div
     * element that contains the map. */
    #map {
      align: right;
      height: 67%;
    }
    /* Optional: Makes the sample page fill the window. */
    html, body {
      height: 100%;
      margin: 0;
      padding: 0;
    }

  </style>

  <style>
  .event {
  border-bottom-color:black;
  border-bottom-width: 4px;
  }
  </style>

  <style>
  body {
  font-family: "Courier New", Courier, monospace;
  font:TT;
    background: rgba(204)(204)(204) 0.50;
  }
  .sidenav {
  height: 100%;
  width: 35%;
  z-index: 1;
  top: 0;
  left: 0;
  background-color: #e6e6e6;
  overflow-x: hidden;
  padding-top: 120px;
  }
  .sidenav a {
   width: 35%;
  text-decoration: none;
  font-size: 25px;
  color: #818181;
  }
  .sidenav a:hover {
  width: 35%
  color: #f1f1f1;
  }
  @media screen and (max-height: 450px) {
  .sidenav {padding-top: 15px;}
  .sidenav a {font-size: 18px;}
  }


  .center {
  text-align: right;
  }
  .center_text {
  text-align: center;
  }
  .header {
  text-align: center;
  background-color: #404040;
  padding-bottom: 0px;
  font-family: "Courier New", Courier, monospace;
  font:TT;
  /font isnt exactly the same cause of
  padding-top: 60px;
  vertical-align:center;
  letter-spacing: 6px;
  font-size: 50px;
  font-weight: bold;
  color: #000000;
  text-decoration: none;
  border-color: #000000;
  border-width: 3px;
  text-shadow:
    -1px -1px 0 #000,
    1px -1px 0 #000,
    -1px 1px 0 #000,
    1px 1px 0 #000;
  }
  </style>
  <style>
  .header2 {
  text-align: center;
  background-color: #404040;
  padding-bottom: 20px;
  font-family: "Courier New", Courier, monospace;
  font:TT;
  /font isnt exactly the same cause of
  padding-top: 0px;
  margin-bottom: 15px;
  letter-spacing: 6px;
  font-size: 25px;
  font-weight: bold;
  color: #000000;
  text-decoration: none;
  border-color: #000000;
  border-width: 3px;
  text-shadow:
    -1px -1px 0 #000,
    1px -1px 0 #000,
    -1px 1px 0 #000,
    1px 1px 0 #000;
  }
  .event {
  width = 35%
  margin: 10px;
  }
  .map {
   align: right;
   height: 100%;
   width: 100%;
  }
  </style>

  <script src="https://maps.googleapis.com/maps/api/js?key=AIzaSyDPxDT17n-Of-WP6bmJrHUdGpbrWKPC70s&libraries=places&callback=initMap" async defer></script>

  <script async defer>
    // This example requires the Places library. Include the libraries=places
    // parameter when you first load the API. For example:
    // <script src="https://maps.googleapis.com/maps/api/js?key=YOUR_API_KEY&libraries=places">
    var map;
    var service;
    var infowindow;

    function geocode(address) {
      const geocoder = new google.maps.Geocoder();
      geocoder.geocode({address}, function(results, status) {
        if (status == 'OK') {
        map.setCenter(results[0].geometry.location);
        var marker = new google.maps.Marker({
            map: map,
            position: results[0].geometry.location
        })
      } else {
        alert('Geocode was not successful for the following reason: ' + status);
      }
    });
    }

    function initMap() {
      const urlParams = new URLSearchParams(window.location.search);
      // const location = urlParams.get('location');
      // const budget = urlParams.get('budget');
      // const radius = urlParams.get('radius');

      // const place = urlParams.get('place_id');
      const place = urlParams.get("location");

      // Cheekwood Botanical Garden and Museum of Art

      console.log(place);

      geocode(place);

      // var vanderbilt = new google.maps.LatLng(36.1447,-86.8027);
      infowindow = new google.maps.InfoWindow();
      map = new google.maps.Map(
          document.getElementById('map'), {zoom: 15});
      // service = new google.maps.places.PlacesService(map);
      // service.nearbySearch(
      //   {location: vanderbilt, radius: 500, types: ['restaurant']},
      //   function(results, status, pagination) {
      //     if (status === google.maps.places.PlacesServiceStatus.OK) {
      //         for (var i = 0; i < results.length; i++) {
      //           createMarker(results[i]);
      //         }
      //         map.setCenter(results[0].geometry.location);
      //       }
      //   }
      // )

      var para = document.createElement("h1");               // Create a <p> element
      para.innerText = place;               // Insert text
      document.body.appendChild(para);

      var address = document.createElement("p");
      address.innerText = "233 5th Ave N, Nashville, TN 37219";
      document.body.appendChild(address);

      var phone = document.createElement("p");
      phone.innerText = "(615) 752-6030";
      document.body.appendChild(phone);

      var hours = document.createElement("p");
      hours.innerText = "Hours today: Closed";
      document.body.appendChild(hours);
    }
    function createMarker(place) {
      var marker = new google.maps.Marker({
        map: map,
        position: place.geometry.location
      });
      google.maps.event.addListener(marker, 'click', function() {
        infowindow.setContent(place.name);
        infowindow.open(map, this);
      });
    }

    function getAddress() {
      const address = new google.maps.Geocoder();
      geocoder.geocode({address}, function(results, status) {
        if (status == 'OK') {
        map.setCenter(results[0].geometry.location);
        var marker = new google.maps.Marker({
            map: map,
            position: results[0].geometry.location
        })
      } else {
        alert('Geocode was not successful for the following reason: ' + status);
      }
    });
    }

    // function getURL() {
      // var link = document.createElement('a');
      // var linkText = document.createTextNode(address);
      // a.appendChild(linkText);
      // a.title = address;
      // a.href = "http://example.com";

    //   var map = new google.maps.Map(document.getElementById('map'));
    //   document.getElementById('submit').addEventListener('click', function() {
    //     geocodePlaceId(geocoder, map, infowindow);
    //   });
    // }

    // This function is called when the user clicks the UI button requesting
    // a geocode of a place ID.
    function geocodePlaceId(geocoder, map, infowindow) {
      var placeId = document.getElementById('place-id').value;
      geocoder.geocode({'placeId': placeId}, function(results, status) {
        if (status === 'OK') {
          if (results[0]) {
            map.setZoom(11);
            map.setCenter(results[0].geometry.location);
            var marker = new google.maps.Marker({
              map: map,
              position: results[0].geometry.location
            });
            infowindow.setContent(results[0].formatted_address);
            infowindow.open(map, marker);
          } else {
            window.alert('No results found');
          }
        } else {
          window.alert('Geocoder failed due to: ' + status);
        }
      });
    }
  </script>
  <!-- <script async defer
  src="https://maps.googleapis.com/maps/api/js?key=AIzaSyDPxDT17n-Of-WP6bmJrHUdGpbrWKPC70s&callback=getAddress">
  </script> -->



</head>
<body>
  <div id="map"></div>

  <div class="container-fluid">
  <div class="row">
  <div class="col-sm-6">
	<div class="event">
		<!-- <a href="#" style="text-align:center;padding-left:7px;width:100%; border: black">Children's Day at the Museum of Modern Art</a> -->
		<!-- <h2>More info</h2> -->
		<!-- <p>$ $ $</p> -->
	</div>
  </div>
  </div>
  </div>
</body>
</html>
